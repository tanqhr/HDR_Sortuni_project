<!DOCTYPE html>
<!--suppress HtmlFormInputWithoutLabel, ThymeleafVariablesResolveInspection -->
<html lang="en"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">

<head>
    <th:block th:insert="~{index.html :: head-include}">&nbsp;</th:block>
    <title>Healthy desserts recipes :: New Recipe</title>
    <meta id="csrf" hidden th:name="${_csrf.getHeaderName()}" th:value="${_csrf.getToken()}">
</head>

<body>

<header th:replace="~{index.html :: header}">&nbsp;</header>
<nav th:replace="~{index.html :: leftbar}">&nbsp;</nav>

<div class="content">

    <p th:text="#{add_recipe}">Please fill in and submit the form below to create a recipe:</p>
    <br>

    <div class="content-vw shadowed rounded-10">

        <!-- TOP -->

        <form id="recipe-add-form" class="add-form" th:object="${recipeDto}" th:action="@{/recipes/add}"
              th:method="POST" enctype="multipart/form-data">
            <input id="recipe-bm-id" type="hidden" th:field="*{tempRecipeId}">
            <input id="author-id" type="hidden" th:field="*{authorId}">

                <div class="row">
                    <div class="form-col">
                        <div class="form__item">
                            <label class="recipe__name" >Recipe Name<i class="red"></i></label>
                            <input name="recipe-name" id="title-input" class="input"
                                   type="text" th:field="*{title}"/>
                        </div>
                        <div class="form__item">
                            <label >Ingredients</label>
                                <div id="ingredient-boxes" class="ingredients" name="ingredients">
                                    <datalist id="units">
                                        <option th:each="unit : ${units}" th:text="${unit}">Some unit</option>
                                    </datalist>
                                    <th:block th:if="${recipeDto.listIngredientDto}"
                                              th:each="ingredient, itemStat : ${recipeDto.listIngredientDto}">
                                    <input type="text" th:value="${ingredient.getIngredientName}"
                                           th:id="|ingredient-name-${itemStat.index}|" class="ingredient-name left"
                                           th:name="|listIngredientDto[${itemStat.index}].ingredientName|"
                                           placeholder="Name">

                                    <input type="text" th:value="${ingredient.getQuantity}"
                                           th:id="|ingredient-quantity-${itemStat.index}|"
                                           class="ingredient-quantity center"
                                           th:name="|listIngredientDto[${itemStat.index}].quantity|"
                                           placeholder="Quantity">

                                        <input list="units" th:value="${ingredient.getUnitName}"
                                               th:id="|ingredient-unit-${itemStat.index}|" class="ingredient-unit right"
                                               th:name="|listIngredientDto[${itemStat.index}].unitName|"
                                               placeholder="Unit">
                                    <input type="button" value="X"
                                           class="sign-x btn-x"
                                           th:onclick="|removeElement('ingredient-box-${itemStat.index}')|">
                                    </th:block>

                                        <input
                                               type="button"
                                               value="+"
                                               onclick="addIngredient()">

                                </div>
                        </div>
                    <div class="form-col">
                        <div class="row">
                            <div class="form__item">
                                <label class="recipe__time">Prep Time</label>
                                <input class="time__input" type="text" placeholder="Minutes"/>
                            </div>
                            <div class="form__item">
                                <label class="recipe__time">Cooking Time</label>
                                <input class="time__input" type="text" placeholder="Minutes"/>
                            </div>
                            <div class="form__item">
                                <label class="recipe__time">Servings</label>
                                <input class="time__input" type="text" placeholder="Numbers"/>
                            </div>
                        </div>
                        <div class="form__item">
                            <label><i class="legend-lbl">Photos</i></label>
                            <div id="photos-error-ctr" class="errors-ctr"></div>
                            <div name="photos" rows="10">

                            <div id="photos-ctr" class="photos-ctr">
                                <th:block th:each="photoVM, upStat : *{photoVMList}">
                                    <div th:id="|photo-box-${upStat.index}|" class="photo-box">
                                        <div class="photos">
                                            <input type="hidden"
                                                   th:id="|photo-id-${upStat.index}|"
                                                   th:field="*{photoVMList[__${upStat.index}__].tempId}">
                                             <input type="hidden"
                                                   th:field="*{photoVMList[__${upStat.index}__].tempRecipeId}">

                                            <label class="grid-photo-left">
                                                <input th:id="|photo-primary-${upStat.index}|" class="grid-photo-left photo-primary"
                                                       th:name="primaryPhotoId"
                                                       th:value="*{photoVMList[__${upStat.index}__].tempId}"
                                                       type="radio" th:checked="${photoVM.tempId == recipeBM.primaryPhotoId}">
                                            </label>
                                                <div class="grid-photo-center">
                                                    <img class="photo-file"
                                                         th:src="*{photoVMList[__${upStat.index}__].url}" src=""
                                                         th:alt="*{photoVMList[__${upStat.index}__].description}" alt=""
                                                         >
                                                </div>

                                            <div class="grid-photo-right align-sign-minus">
                                                <input type="button"
                                                       class="sign-x"
                                                       value="X"
                                                       th:onclick="removePhoto(__${upStat.index}__)">
                                            </div>

                                            <div class="grid-photo-bottom photo-filename"
                                                 th:text="*{photoVMList[__${upStat.index}__].filename}"></div>
                                        </div>
                                    </div>
                                </th:block>
                            </div>
                            </div>
                            <!-- Upload Photo Form -->
                            <div id="new-photo-ctr" class="new-photo-ctr">


                                <div class="grid-label-input-ctr lbl80 new-photo-file">
                                    <label class="grid-label">File:</label>
                                    <div class="double-border grid-input">
                                        <input id="new-photo-file-data" class="new-photo-file-data"
                                               type="file" accept="image/*">
                                    </div>
                                </div>

                                <div class="grid-label-input-ctr lbl80">
                                    <label for="new-photo-description-text"
                                           id="new-photo-description-lbl" class="grid-label">Description:</label>
                                    <div class="grid-input double-border">
                                        <input id="new-photo-description-text"
                                               type="text" placeholder="Photo Description">
                                    </div>
                                </div>

                                <div id="new-photo-error-ctr"></div>

                                <div class="grid-label-input-ctr lbl80">
                                    <input id="upload-btn-new-photo" class="grid-input submit-btn" type="button" value="Upload"
                                           onclick="uploadPhoto();">
                                </div>
                                </div>

                        <div class="form__item">
                            <label >Preparation</label>
                            <textarea name="cook-tips" rows="5"></textarea>
                        </div>
                                <input id="submit-btn-add-recipe" class="submit-btn"
                                       type="submit" name="submit-btn" value="Submit">
                    </div>

        </form>
    </div>
</div>
<div>


    <img class="product-item-img mx-auto d-flex rounded img-fluid mb-3 mb-lg-0" src="/images/cooker.webp" alt="..." />


</div>
</div>
</div>
</div>

    <nav th:replace="~{index.html :: rightbar}">&nbsp;</nav>
    <footer th:replace="~{index.html :: footer}">&nbsp;</footer>

    <!-- JAVA SCRIPT -->
    <script src="/javascript/recipe-add.js"></script>
</body>

</html>
